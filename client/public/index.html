<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teller's Window - 1980s Bank Simulation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier Prime', monospace;
            background: #000;
            color: #00ff00;
            overflow: hidden;
            user-select: none;
        }
        
        .crt-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(ellipse at center, #111 0%, #000 70%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .crt-screen {
            width: 95%;
            height: 95%;
            background: #001100;
            border: 3px solid #333;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 50px rgba(0, 255, 0, 0.1);
        }
        
        .scanlines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 255, 0, 0.03) 2px,
                rgba(0, 255, 0, 0.03) 4px
            );
            pointer-events: none;
            animation: flicker 0.15s infinite linear alternate;
        }
        
        @keyframes flicker {
            0% { opacity: 1; }
            100% { opacity: 0.97; }
        }
        
        .game-interface {
            display: flex;
            height: 100%;
            padding: 20px;
            gap: 20px;
        }
        
        .customer-area {
            flex: 1;
            background: rgba(0, 50, 0, 0.3);
            border: 2px solid #004400;
            padding: 15px;
            border-radius: 8px;
        }
        
        .terminal-area {
            flex: 1;
            background: rgba(0, 50, 0, 0.3);
            border: 2px solid #004400;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }
        
        .customer-info {
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0, 100, 0, 0.1);
            border: 1px solid #006600;
            border-radius: 4px;
        }
        
        .documents-area {
            flex: 1;
            overflow-y: auto;
        }
        
        .document {
            background: rgba(0, 80, 0, 0.2);
            border: 1px solid #008800;
            margin: 10px 0;
            padding: 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .document:hover {
            background: rgba(0, 120, 0, 0.3);
            border-color: #00aa00;
        }
        
        .document.selected {
            background: rgba(0, 150, 0, 0.4);
            border-color: #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }
        
        .terminal-output {
            flex: 1;
            background: rgba(0, 30, 0, 0.5);
            border: 1px solid #003300;
            padding: 15px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        
        .terminal-input-area {
            display: flex;
            align-items: center;
            background: rgba(0, 30, 0, 0.5);
            border: 1px solid #003300;
            padding: 10px;
            border-radius: 4px;
        }
        
        .prompt {
            color: #00ff00;
            margin-right: 10px;
        }
        
        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: inherit;
            font-size: 14px;
            outline: none;
        }
        
        .cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #00ff00;
            margin-left: 5px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .status-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 50, 0, 0.8);
            padding: 8px 20px;
            font-size: 12px;
            border-top: 1px solid #004400;
        }
        
        .help-text {
            font-size: 11px;
            color: #008800;
            margin-top: 10px;
            padding: 8px;
            background: rgba(0, 40, 0, 0.3);
            border-radius: 4px;
        }
        
        .signature-display {
            background: rgba(0, 60, 0, 0.2);
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #006600;
            border-radius: 4px;
            font-style: italic;
        }
        
        .transaction-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
        }
        
        .success {
            background: rgba(0, 150, 0, 0.3);
            border: 2px solid #00aa00;
            color: #00ff00;
        }
        
        .error {
            background: rgba(150, 0, 0, 0.3);
            border: 2px solid #aa0000;
            color: #ff4444;
        }
    </style>
</head>
<body>
    <div class="crt-container">
        <div class="crt-screen">
            <div class="scanlines"></div>
            
            <div class="game-interface">
                <!-- Customer/Documents Area -->
                <div class="customer-area">
                    <div class="customer-info" id="customer-info">
                        <h3>CURRENT CUSTOMER</h3>
                        <div id="customer-details">Waiting for next customer...</div>
                    </div>
                    
                    <div class="documents-area">
                        <h4>DOCUMENTS PROVIDED:</h4>
                        <div id="documents-list"></div>
                    </div>
                </div>
                
                <!-- Terminal Area -->
                <div class="terminal-area">
                    <div class="terminal-output" id="terminal-output">
                        <div style="color: #00ff00; font-weight: bold;">
                            ═══════════════════════════════════════════════════════════════════════
                            ║                    FIRST NATIONAL BANK TERMINAL                    ║
                            ║                         TELLER STATION #3                         ║
                            ║                        SYSTEM VERSION 2.1                         ║
                            ═══════════════════════════════════════════════════════════════════════
                        </div>
                        <br>
                        <div>TERMINAL READY - AWAITING CUSTOMER</div>
                        <div>Type HELP for available commands</div>
                    </div>
                    
                    <div class="terminal-input-area">
                        <span class="prompt">TELLER></span>
                        <input type="text" class="terminal-input" id="terminal-input" 
                               placeholder="Enter command..." autocomplete="off">
                        <span class="cursor"></span>
                    </div>
                    
                    <div class="help-text">
                        COMMANDS: EXAMINE [doc] | LOOKUP [account] | VERIFY [amount] | APPROVE | REJECT | HELP
                    </div>
                </div>
            </div>
            
            <div class="status-bar">
                <span id="game-status">Score: 0 | Transactions: 0 | Time: 08:30:00</span>
            </div>
        </div>
    </div>

    <script>
        // Sound system
        const sounds = {};
        
        function initSounds() {
            const soundFiles = {
                typewriter: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBzuR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCD==',
                stamp: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBzuR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCD==',
                receipt: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBzuR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCD==',
                drawer: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBzuR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCD==',
                buzzer: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBzuR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCD==',
                paperShuffle: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBzuR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCDuP2vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYfCD=='
            };
            
            Object.keys(soundFiles).forEach(name => {
                sounds[name] = new Audio(soundFiles[name]);
                sounds[name].volume = 0.3;
            });
        }
        
        function playSound(soundName) {
            if (sounds[soundName]) {
                sounds[soundName].currentTime = 0;
                sounds[soundName].play().catch(() => {}); // Ignore autoplay restrictions
            }
        }
        
        // Game state
        let gameState = {
            currentCustomer: null,
            currentCustomerIndex: 0,
            score: 0,
            transactions: 0,
            selectedDocument: null,
            systemDatabase: {} // Will hold customer records
        };
        
        // Customer database - what's on file in the bank system
        const customerDatabase = {
            '123456789': {
                name: 'Mary Johnson',
                dob: '1982-07-22',
                address: '123 Oak Street, Springfield',
                photo: '[Photo: Woman, brown hair, glasses, age 42]',
                signature: 'Mary Johnson',
                balance: 1850,
                accountStatus: 'ACTIVE'
            },
            '987654321': {
                name: 'Robert Wilson',
                dob: '1975-03-15', 
                address: '456 Pine Avenue, Springfield',
                photo: '[Photo: Man, dark hair, beard, age 49]',
                signature: 'Robert Wilson',
                balance: 12500,
                accountStatus: 'ACTIVE'
            },
            '555777888': {
                name: 'Sarah Davis',
                dob: '1990-11-08',
                address: '789 Elm Drive, Springfield',
                photo: '[Photo: Woman, blonde hair, no glasses, age 34]',
                signature: 'Sarah Davis',
                balance: 3200,
                accountStatus: 'ACTIVE'
            }
        };
        
        // Transaction requirements by type
        const transactionRequirements = {
            'WITHDRAWAL': ['TRANSACTION_FORM', 'ID', 'SIGNATURE'],
            'DEPOSIT': ['TRANSACTION_FORM', 'ID', 'SIGNATURE'],
            'WIRE_TRANSFER': ['WIRE_FORM', 'ID', 'PASSPORT', 'SIGNATURE'],
            'ACCOUNT_OPENING': ['APPLICATION', 'ID', 'PROOF_OF_ADDRESS', 'INITIAL_DEPOSIT', 'SIGNATURE'],
            'CASHIERS_CHECK': ['CHECK_REQUEST', 'ID', 'SIGNATURE', 'PAYMENT']
        };
        
        // Customers with their requests and provided documents
        const customers = [
            {
                name: 'Mary Johnson',
                transactionType: 'WITHDRAWAL',
                requestedAmount: 200,
                requestedAccount: '123456789',
                documents: [
                    {
                        id: 'FORM',
                        type: 'TRANSACTION_FORM',
                        title: 'Withdrawal Request Form',
                        content: {
                            customerName: 'Mary Johnson',
                            accountNumber: '123456789',
                            transactionType: 'WITHDRAWAL',
                            amount: 250, // Intentional discrepancy!
                            date: '2024-06-01',
                            customerSignature: 'Mary Johnson'
                        }
                    },
                    {
                        id: 'ID',
                        type: 'ID',
                        title: 'Driver\'s License',
                        content: {
                            name: 'Mary Johnson',
                            dob: '1982-07-22',
                            address: '123 Oak Street, Springfield',
                            licenseNumber: 'DL-54321',
                            expirationDate: '2026-07-22'
                        }
                    },
                    {
                        id: 'SIG',
                        type: 'SIGNATURE',
                        title: 'Signature Card',
                        content: {
                            signature: 'Mary Johnson Fraudulent' // Intentional mismatch!
                        }
                    }
                ]
            },
            {
                name: 'Robert Wilson',
                transactionType: 'WIRE_TRANSFER',
                requestedAmount: 5000,
                requestedAccount: '987654321',
                targetAccount: '555123456',
                documents: [
                    {
                        id: 'WIRE',
                        type: 'WIRE_FORM',
                        title: 'Wire Transfer Request',
                        content: {
                            fromAccount: '987654321',
                            toAccount: '555123456',
                            amount: 5000,
                            recipientName: 'Business Solutions Inc',
                            purpose: 'Invoice Payment',
                            senderName: 'Robert Wilson',
                            date: '2024-06-01'
                        }
                    },
                    {
                        id: 'ID',
                        type: 'ID',
                        title: 'Driver\'s License',
                        content: {
                            name: 'Robert Wilson',
                            dob: '1975-03-15',
                            address: '456 Pine Avenue, Springfield',
                            licenseNumber: 'DL-12345'
                        }
                    },
                    {
                        id: 'PASSPORT',
                        type: 'PASSPORT',
                        title: 'U.S. Passport',
                        content: {
                            name: 'Robert Wilson',
                            dob: '1975-03-15',
                            passportNumber: 'US-98765432',
                            issuedDate: '2020-01-15',
                            expirationDate: '2030-01-15'
                        }
                    },
                    {
                        id: 'SIG',
                        type: 'SIGNATURE',
                        title: 'Signature Verification',
                        content: {
                            signature: 'Robert Wilson'
                        }
                    }
                ]
            },
            {
                name: 'Sarah Davis',
                transactionType: 'DEPOSIT',
                requestedAmount: 1200,
                requestedAccount: '555777888',
                documents: [
                    {
                        id: 'FORM',
                        type: 'TRANSACTION_FORM',
                        title: 'Deposit Form',
                        content: {
                            customerName: 'Sarah Davis',
                            accountNumber: '555777889', // Wrong account number!
                            transactionType: 'DEPOSIT',
                            amount: 1200,
                            depositType: 'CHECK',
                            date: '2024-06-01'
                        }
                    },
                    {
                        id: 'ID',
                        type: 'ID',
                        title: 'Driver\'s License',
                        content: {
                            name: 'Sarah Davis',
                            dob: '1990-11-08',
                            address: '789 Elm Drive, Springfield',
                            licenseNumber: 'DL-77788'
                        }
                    },
                    {
                        id: 'SIG',
                        type: 'SIGNATURE',
                        title: 'Signature Card',
                        content: {
                            signature: 'Sarah Davis'
                        }
                    }
                ]
            }
        ];
        
        // Initialize game
        function initGame() {
            initSounds();
            loadNextCustomer();
            setupEventListeners();
        }
        
        function setupEventListeners() {
            const terminalInput = document.getElementById('terminal-input');
            
            terminalInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    const command = this.value.trim().toUpperCase();
                    if (command) {
                        playSound('typewriter');
                        processCommand(command);
                        this.value = '';
                    }
                }
            });
            
            // Auto-focus terminal
            terminalInput.focus();
        }
        
        function loadNextCustomer() {
            if (gameState.currentCustomerIndex >= customers.length) {
                endGame();
                return;
            }
            
            gameState.currentCustomer = customers[gameState.currentCustomerIndex];
            displayCustomer();
            playSound('drawer');
            addTerminalOutput(`NEW CUSTOMER APPROACHING WINDOW`);
            addTerminalOutput(`Customer states: "I need to process a ${gameState.currentCustomer.transactionType.replace('_', ' ').toLowerCase()}"`);
        }
        
        function displayCustomer() {
            const customer = gameState.currentCustomer;
            const customerDetails = document.getElementById('customer-details');
            const documentsList = document.getElementById('documents-list');
            
            // Display customer info
            customerDetails.innerHTML = `
                <strong>CUSTOMER:</strong> ${customer.name}<br>
                <strong>REQUEST:</strong> ${customer.transactionType.replace('_', ' ')}<br>
                <strong>AMOUNT:</strong> $${customer.requestedAmount}<br>
                <strong>ACCOUNT:</strong> ${customer.requestedAccount}
            `;
            
            // Display documents
            documentsList.innerHTML = '';
            customer.documents.forEach((doc, index) => {
                const docDiv = document.createElement('div');
                docDiv.className = 'document';
                docDiv.innerHTML = `
                    <strong>${doc.title}</strong><br>
                    <small>Type: ${doc.type}</small>
                `;
                docDiv.onclick = () => selectDocument(index);
                documentsList.appendChild(docDiv);
            });
        }
        
        function selectDocument(index) {
            // Remove previous selection
            document.querySelectorAll('.document').forEach(doc => doc.classList.remove('selected'));
            
            // Select new document
            document.querySelectorAll('.document')[index].classList.add('selected');
            gameState.selectedDocument = index;
            
            playSound('paperShuffle');
            addTerminalOutput(`Document selected: ${gameState.currentCustomer.documents[index].title}`);
        }
        
        function processCommand(command) {
            const parts = command.split(' ');
            const action = parts[0];
            const parameter = parts.slice(1).join(' ');
            
            addTerminalOutput(`TELLER> ${command}`);
            
            switch (action) {
                case 'EXAMINE':
                    examineDocument(parameter);
                    break;
                case 'LOOKUP':
                    lookupAccount(parameter);
                    break;
                case 'VERIFY':
                    verifyAmount(parameter);
                    break;
                case 'APPROVE':
                    approveTransaction();
                    break;
                case 'REJECT':
                    rejectTransaction();
                    break;
                case 'HELP':
                    showHelp();
                    break;
                default:
                    addTerminalOutput('UNKNOWN COMMAND. Type HELP for available commands.');
                    playSound('buzzer');
            }
        }
        
        function examineDocument(docType) {
            if (!gameState.currentCustomer) {
                addTerminalOutput('No customer present.');
                return;
            }
            
            let docIndex = -1;
            if (docType) {
                // Find by type
                docIndex = gameState.currentCustomer.documents.findIndex(doc => 
                    doc.type === docType || doc.id === docType
                );
            } else if (gameState.selectedDocument !== null) {
                // Use selected document
                docIndex = gameState.selectedDocument;
            }
            
            if (docIndex === -1) {
                addTerminalOutput('Document not found or not selected.');
                playSound('buzzer');
                return;
            }
            
            const doc = gameState.currentCustomer.documents[docIndex];
            playSound('paperShuffle');
            
            addTerminalOutput(`=== EXAMINING: ${doc.title} ===`);
            
            // Display document contents
            Object.entries(doc.content).forEach(([key, value]) => {
                const label = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                addTerminalOutput(`${label}: ${value}`);
            });
            
            addTerminalOutput(`=== END DOCUMENT ===`);
        }
        
        function lookupAccount(accountNumber) {
            if (!accountNumber) {
                addTerminalOutput('Please specify account number.');
                playSound('buzzer');
                return;
            }
            
            playSound('typewriter');
            addTerminalOutput('Accessing customer database...');
            
            setTimeout(() => {
                const customerRecord = customerDatabase[accountNumber];
                if (customerRecord) {
                    addTerminalOutput(`=== CUSTOMER RECORD ===`);
                    addTerminalOutput(`Name: ${customerRecord.name}`);
                    addTerminalOutput(`DOB: ${customerRecord.dob}`);
                    addTerminalOutput(`Address: ${customerRecord.address}`);
                    addTerminalOutput(`Photo: ${customerRecord.photo}`);
                    addTerminalOutput(`Signature on file: ${customerRecord.signature}`);
                    addTerminalOutput(`Current Balance: $${customerRecord.balance}`);
                    addTerminalOutput(`Account Status: ${customerRecord.accountStatus}`);
                    addTerminalOutput(`=== END RECORD ===`);
                } else {
                    addTerminalOutput('ACCOUNT NOT FOUND IN SYSTEM');
                    playSound('buzzer');
                }
            }, 1000);
        }
        
        function verifyAmount(amount) {
            if (!amount) {
                addTerminalOutput('Please specify amount to verify.');
                return;
            }
            
            const numAmount = parseFloat(amount.replace('$', ''));
            playSound('typewriter');
            addTerminalOutput(`Verifying amount: $${numAmount}`);
            
            // Don't tell them if it's right or wrong - they must figure it out
        }
        
        function approveTransaction() {
            if (!gameState.currentCustomer) {
                addTerminalOutput('No customer present.');
                return;
            }
            
            playSound('stamp');
            addTerminalOutput('TRANSACTION APPROVED');
            addTerminalOutput('Processing...');
            
            setTimeout(() => {
                const isCorrect = validateTransaction();
                if (isCorrect) {
                    gameState.score += 100;
                    addTerminalOutput('✓ CORRECT APPROVAL');
                    playSound('receipt');
                } else {
                    gameState.score -= 50;
                    addTerminalOutput('✗ INCORRECT APPROVAL - FRAUD DETECTED BY SUPERVISOR');
                    playSound('buzzer');
                }
                
                completeTransaction();
            }, 2000);
        }
        
        function rejectTransaction() {
            if (!gameState.currentCustomer) {
                addTerminalOutput('No customer present.');
                return;
            }
            
            playSound('buzzer');
            addTerminalOutput('TRANSACTION REJECTED');
            addTerminalOutput('Notifying supervisor...');
            
            setTimeout(() => {
                const isCorrect = !validateTransaction(); // Correct if transaction was actually invalid
                if (isCorrect) {
                    gameState.score += 100;
                    addTerminalOutput('✓ CORRECT REJECTION');
                } else {
                    gameState.score -= 50;
                    addTerminalOutput('✗ INCORRECT REJECTION - VALID TRANSACTION DENIED');
                }
                
                completeTransaction();
            }, 2000);
        }
        
        function validateTransaction() {
            const customer = gameState.currentCustomer;
            const account = customer.requestedAccount;
            const dbRecord = customerDatabase[account];
            
            if (!dbRecord) return false;
            
            // Check various fraud indicators
            let isValid = true;
            
            // Find documents
            const form = customer.documents.find(d => d.type.includes('FORM'));
            const id = customer.documents.find(d => d.type === 'ID');
            const signature = customer.documents.find(d => d.type === 'SIGNATURE');
            
            // Check name matches
            if (id && id.content.name !== dbRecord.name) isValid = false;
            
            // Check DOB matches
            if (id && id.content.dob !== dbRecord.dob) isValid = false;
            
            // Check signature matches
            if (signature && signature.content.signature !== dbRecord.signature) isValid = false;
            
            // Check amounts match between request and form
            if (form && form.content.amount !== customer.requestedAmount) isValid = false;
            
            // Check account numbers match
            if (form && form.content.accountNumber && form.content.accountNumber !== customer.requestedAccount) isValid = false;
            
            return isValid;
        }
        
        function completeTransaction() {
            gameState.transactions++;
            gameState.currentCustomerIndex++;
            
            setTimeout(() => {
                addTerminalOutput('Customer leaves window.');
                addTerminalOutput('='.repeat(50));
                loadNextCustomer();
            }, 3000);
            
            updateStatus();
        }
        
        function updateStatus() {
            const statusEl = document.getElementById('game-status');
            const time = new Date().toLocaleTimeString();
            statusEl.textContent = `Score: ${gameState.score} | Transactions: ${gameState.transactions} | Time: ${time}`;
        }
        
        function endGame() {
            addTerminalOutput('='.repeat(50));
            addTerminalOutput('END OF SHIFT');
            addTerminalOutput(`Final Score: ${gameState.score}`);
            addTerminalOutput(`Transactions Processed: ${gameState.transactions}`);
            
            if (gameState.score >= 200) {
                addTerminalOutput('EXCELLENT WORK - PROMOTION RECOMMENDED');
            } else if (gameState.score >= 100) {
                addTerminalOutput('GOOD WORK - MEETS EXPECTATIONS');
            } else {
                addTerminalOutput('POOR PERFORMANCE - ADDITIONAL TRAINING REQUIRED');
            }
        }
        
        function showHelp() {
            addTerminalOutput('=== TELLER COMMANDS ===');
            addTerminalOutput('EXAMINE [document_type] - Examine specific document');
            addTerminalOutput('EXAMINE - Examine currently selected document');
            addTerminalOutput('LOOKUP [account_number] - Look up customer in database');
            addTerminalOutput('VERIFY [amount] - Verify transaction amount');
            addTerminalOutput('APPROVE - Approve the transaction');
            addTerminalOutput('REJECT - Reject the transaction');
            addTerminalOutput('HELP - Show this help');
            addTerminalOutput('=== Document Types ===');
            addTerminalOutput('FORM, ID, PASSPORT, SIGNATURE');
        }
        
        function addTerminalOutput(text) {
            const output = document.getElementById('terminal-output');
            output.innerHTML += '<br>' + text;
            output.scrollTop = output.scrollHeight;
        }
        
        // Start the game
        initGame();
    </script>
</body>
</html>