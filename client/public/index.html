<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teller's Window - 1980s Bank Simulation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff00;
            overflow: hidden;
        }
        
        .bank-terminal {
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, #002200 0%, #000 100%);
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            border: 2px solid #00ff00;
            padding: 10px;
            background: rgba(0, 50, 0, 0.3);
        }
        
        .game-area {
            display: flex;
            flex: 1;
            gap: 20px;
        }
        
        .customer-window {
            flex: 1;
            border: 2px solid #00ff00;
            padding: 15px;
            background: rgba(0, 40, 0, 0.2);
        }
        
        .terminal-window {
            flex: 1;
            border: 2px solid #00ff00;
            padding: 15px;
            background: rgba(0, 40, 0, 0.2);
            display: flex;
            flex-direction: column;
        }
        
        .terminal-output {
            flex: 1;
            background: #001100;
            border: 1px solid #004400;
            padding: 10px;
            overflow-y: auto;
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .terminal-input {
            display: flex;
            align-items: center;
            background: #001100;
            border: 1px solid #004400;
            padding: 8px;
        }
        
        .prompt {
            margin-right: 10px;
            color: #00ff00;
        }
        
        .input-field {
            flex: 1;
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: inherit;
            font-size: 14px;
            outline: none;
        }
        
        .cursor {
            width: 8px;
            height: 16px;
            background: #00ff00;
            animation: blink 1s infinite;
            margin-left: 5px;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .customer-info {
            background: rgba(0, 60, 0, 0.3);
            border: 1px solid #006600;
            padding: 10px;
            margin-bottom: 15px;
        }
        
        .document {
            background: rgba(0, 50, 0, 0.2);
            border: 1px solid #005500;
            padding: 8px;
            margin: 5px 0;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .document:hover {
            background: rgba(0, 80, 0, 0.4);
        }
        
        .document.selected {
            background: rgba(0, 120, 0, 0.5);
            border-color: #00aa00;
        }
        
        .status-bar {
            background: rgba(0, 60, 0, 0.8);
            border: 1px solid #006600;
            padding: 8px;
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="bank-terminal">
        <div class="header">
            <h2>FIRST NATIONAL BANK - TELLER STATION #3</h2>
            <div>SYSTEM VERSION 2.1 - FRAUD DETECTION ENABLED</div>
        </div>
        
        <div class="game-area">
            <div class="customer-window">
                <h3>CUSTOMER WINDOW</h3>
                <div class="customer-info" id="customer-info">
                    <div>Waiting for next customer...</div>
                </div>
                
                <h4>DOCUMENTS PROVIDED:</h4>
                <div id="documents-area"></div>
            </div>
            
            <div class="terminal-window">
                <h3>BANK TERMINAL</h3>
                <div class="terminal-output" id="terminal">
                    <div style="color: #00ff00;">
                        ========================================<br>
                        FIRST NATIONAL BANK SYSTEM v2.1<br>
                        TELLER AUTHENTICATION: APPROVED<br>
                        FRAUD DETECTION: ACTIVE<br>
                        ========================================<br><br>
                        SYSTEM READY - AWAITING CUSTOMER<br>
                        Type HELP for commands
                    </div>
                </div>
                
                <div class="terminal-input">
                    <span class="prompt">BANK></span>
                    <input type="text" class="input-field" id="command-input" autocomplete="off">
                    <span class="cursor"></span>
                </div>
            </div>
        </div>
        
        <div class="status-bar" id="status">
            Score: 0 | Transactions: 0 | Accuracy: 100% | Time: 08:30:00
        </div>
    </div>

    <script>
        // Enhanced sound system with real typewriter sounds
        const soundContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function createTypewriterSound(frequency = 800, duration = 0.1) {
            const oscillator = soundContext.createOscillator();
            const gainNode = soundContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(soundContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency + Math.random() * 200, soundContext.currentTime);
            oscillator.type = 'square';
            
            gainNode.gain.setValueAtTime(0.1, soundContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, soundContext.currentTime + duration);
            
            oscillator.start(soundContext.currentTime);
            oscillator.stop(soundContext.currentTime + duration);
        }
        
        function playStampSound() {
            const oscillator = soundContext.createOscillator();
            const gainNode = soundContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(soundContext.destination);
            
            oscillator.frequency.setValueAtTime(200, soundContext.currentTime);
            oscillator.type = 'square';
            
            gainNode.gain.setValueAtTime(0.3, soundContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, soundContext.currentTime + 0.3);
            
            oscillator.start();
            oscillator.stop(soundContext.currentTime + 0.3);
        }
        
        function playBuzzerSound() {
            const oscillator = soundContext.createOscillator();
            const gainNode = soundContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(soundContext.destination);
            
            oscillator.frequency.setValueAtTime(150, soundContext.currentTime);
            oscillator.type = 'square';
            
            gainNode.gain.setValueAtTime(0.2, soundContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, soundContext.currentTime + 0.5);
            
            oscillator.start();
            oscillator.stop(soundContext.currentTime + 0.5);
        }
        
        // Customer and banking data
        const firstNames = ['John', 'Mary', 'Robert', 'Patricia', 'James', 'Jennifer', 'Michael', 'Linda', 'William', 'Elizabeth', 'David', 'Barbara', 'Richard', 'Susan', 'Joseph', 'Jessica', 'Thomas', 'Sarah', 'Christopher', 'Karen', 'Charles', 'Nancy', 'Daniel', 'Lisa', 'Matthew', 'Betty', 'Anthony', 'Helen', 'Mark', 'Sandra', 'Donald', 'Donna', 'Steven', 'Carol', 'Paul', 'Ruth', 'Andrew', 'Sharon', 'Joshua', 'Michelle'];
        
        const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez', 'Hernandez', 'Lopez', 'Gonzalez', 'Wilson', 'Anderson', 'Thomas', 'Taylor', 'Moore', 'Jackson', 'Martin', 'Lee', 'Perez', 'Thompson', 'White', 'Harris', 'Sanchez', 'Clark', 'Ramirez', 'Lewis', 'Robinson', 'Walker', 'Young', 'Allen', 'King', 'Wright', 'Scott', 'Torres', 'Nguyen', 'Hill', 'Flores'];
        
        const streets = ['Main St', 'Oak Ave', 'Pine St', 'Elm Dr', 'Cedar Ln', 'Maple Rd', 'Birch St', 'Willow Ave', 'Cherry St', 'Poplar Dr'];
        
        // Bank database
        let bankDatabase = {};
        
        // Game state
        let gameState = {
            currentCustomer: null,
            score: 0,
            transactions: 0,
            correctDecisions: 0,
            totalDecisions: 0,
            selectedDocument: null
        };
        
        // Generate random customer with potential fraud
        function generateCustomer() {
            const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
            const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
            const name = `${firstName} ${lastName}`;
            const accountNumber = String(Math.floor(Math.random() * 900000000) + 100000000);
            
            // Generate real address
            const streetNumber = Math.floor(Math.random() * 9999) + 1;
            const street = streets[Math.floor(Math.random() * streets.length)];
            const address = `${streetNumber} ${street}, Springfield`;
            
            // Generate DOB
            const currentYear = new Date().getFullYear();
            const birthYear = currentYear - (Math.floor(Math.random() * 50) + 21);
            const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            const dob = `${birthYear}-${month}-${day}`;
            
            // Transaction types
            const transactionTypes = ['WITHDRAWAL', 'DEPOSIT', 'WIRE TRANSFER', 'CASHIERS CHECK'];
            const transactionType = transactionTypes[Math.floor(Math.random() * transactionTypes.length)];
            
            let amount;
            switch (transactionType) {
                case 'WITHDRAWAL':
                    amount = Math.floor(Math.random() * 2000) + 50;
                    break;
                case 'DEPOSIT':
                    amount = Math.floor(Math.random() * 5000) + 100;
                    break;
                case 'WIRE TRANSFER':
                    amount = Math.floor(Math.random() * 25000) + 1000;
                    break;
                case 'CASHIERS CHECK':
                    amount = Math.floor(Math.random() * 10000) + 500;
                    break;
            }
            
            // Generate signature variations
            const correctSignature = name;
            const signatureVariations = [
                name + ' Jr',
                firstName + ' ' + lastName.slice(0, -1) + 'z',
                firstName.charAt(0) + '. ' + lastName,
                name + ' Sr',
                firstName + ' ' + lastName + ' II'
            ];
            
            // Fraud probability (30% chance)
            const isFraud = Math.random() < 0.3;
            const fraudType = isFraud ? Math.floor(Math.random() * 3) : -1; // 0=signature, 1=amount, 2=account
            
            // Store in bank database
            bankDatabase[accountNumber] = {
                name: name,
                dob: dob,
                address: address,
                signature: correctSignature,
                balance: Math.floor(Math.random() * 50000) + 1000,
                photo: `[Photo of ${firstName}, ${currentYear - birthYear} years old]`,
                accountStatus: 'ACTIVE'
            };
            
            // Generate documents with potential fraud
            const documents = [];
            
            // Transaction form
            let formSignature = correctSignature;
            let formAmount = amount;
            let formAccount = accountNumber;
            
            if (fraudType === 0) { // Signature fraud
                formSignature = signatureVariations[Math.floor(Math.random() * signatureVariations.length)];
            } else if (fraudType === 1) { // Amount fraud
                formAmount = amount + Math.floor(Math.random() * 500) + 50;
            } else if (fraudType === 2) { // Account fraud
                formAccount = String(Math.floor(Math.random() * 900000000) + 100000000);
            }
            
            documents.push({
                type: 'TRANSACTION_FORM',
                title: `${transactionType} REQUEST FORM`,
                data: {
                    customerName: name,
                    accountNumber: formAccount,
                    transactionType: transactionType,
                    amount: formAmount,
                    signature: formSignature,
                    date: '2024-06-01'
                }
            });
            
            // ID Document
            documents.push({
                type: 'DRIVERS_LICENSE',
                title: 'DRIVERS LICENSE',
                data: {
                    name: name,
                    dob: dob,
                    address: address,
                    licenseNumber: 'DL-' + Math.floor(Math.random() * 99999).toString().padStart(5, '0'),
                    expiration: '2026-12-31'
                }
            });
            
            // Additional documents for wire transfers
            if (transactionType === 'WIRE TRANSFER') {
                documents.push({
                    type: 'PASSPORT',
                    title: 'US PASSPORT',
                    data: {
                        name: name,
                        dob: dob,
                        passportNumber: 'US' + Math.floor(Math.random() * 99999999).toString().padStart(8, '0'),
                        issued: '2020-01-01',
                        expiration: '2030-01-01'
                    }
                });
            }
            
            // Signature card
            documents.push({
                type: 'SIGNATURE',
                title: 'SIGNATURE VERIFICATION',
                data: {
                    signature: formSignature
                }
            });
            
            return {
                name: name,
                accountNumber: accountNumber,
                transactionType: transactionType,
                requestedAmount: amount,
                documents: documents,
                isFraud: isFraud,
                fraudType: fraudType
            };
        }
        
        // Display customer
        function showCustomer() {
            const customer = generateCustomer();
            gameState.currentCustomer = customer;
            
            const customerInfo = document.getElementById('customer-info');
            customerInfo.innerHTML = `
                <strong>CUSTOMER:</strong> ${customer.name}<br>
                <strong>REQUEST:</strong> ${customer.transactionType}<br>
                <strong>AMOUNT:</strong> $${customer.requestedAmount}<br>
                <strong>ACCOUNT:</strong> ${customer.accountNumber}
            `;
            
            const docsArea = document.getElementById('documents-area');
            docsArea.innerHTML = '';
            
            customer.documents.forEach((doc, index) => {
                const docDiv = document.createElement('div');
                docDiv.className = 'document';
                docDiv.innerHTML = `<strong>${doc.title}</strong><br><small>Click to select</small>`;
                docDiv.onclick = () => selectDocument(index);
                docsArea.appendChild(docDiv);
            });
            
            typeMessage('NEW CUSTOMER APPROACHING WINDOW');
            setTimeout(() => {
                typeMessage(`Customer requests: "${customer.transactionType} of $${customer.requestedAmount}"`);
            }, 1000);
        }
        
        function selectDocument(index) {
            // Remove previous selection
            document.querySelectorAll('.document').forEach(doc => doc.classList.remove('selected'));
            
            // Select new document
            document.querySelectorAll('.document')[index].classList.add('selected');
            gameState.selectedDocument = index;
            
            createTypewriterSound(600, 0.2);
            typeMessage(`Document selected: ${gameState.currentCustomer.documents[index].title}`);
        }
        
        // Typewriter effect with sounds
        function typeMessage(text, callback) {
            const terminal = document.getElementById('terminal');
            const newLine = document.createElement('div');
            terminal.appendChild(newLine);
            
            let i = 0;
            const typeInterval = setInterval(() => {
                if (i < text.length) {
                    newLine.textContent += text.charAt(i);
                    if (Math.random() > 0.6) { // Random typing sounds
                        createTypewriterSound();
                    }
                    i++;
                } else {
                    clearInterval(typeInterval);
                    if (callback) callback();
                }
                terminal.scrollTop = terminal.scrollHeight;
            }, 30 + Math.random() * 40);
        }
        
        // Command processing
        function processCommand(command) {
            const parts = command.trim().toUpperCase().split(' ');
            const action = parts[0];
            const parameter = parts.slice(1).join(' ');
            
            typeMessage(`BANK> ${command}`, () => {
                setTimeout(() => {
                    switch (action) {
                        case 'LOOKUP':
                            if (parameter) {
                                lookupAccount(parameter);
                            } else {
                                typeMessage('ERROR: Specify account number');
                                playBuzzerSound();
                            }
                            break;
                        case 'EXAMINE':
                            if (parameter) {
                                examineDocument(parameter);
                            } else if (gameState.selectedDocument !== null) {
                                examineDocument('SELECTED');
                            } else {
                                typeMessage('ERROR: Specify document type or select document');
                                playBuzzerSound();
                            }
                            break;
                        case 'VERIFY':
                            if (parameter) {
                                verifyAmount(parseInt(parameter));
                            } else {
                                typeMessage('ERROR: Specify amount to verify');
                                playBuzzerSound();
                            }
                            break;
                        case 'APPROVE':
                            approveTransaction();
                            break;
                        case 'REJECT':
                            rejectTransaction();
                            break;
                        case 'HELP':
                            showHelp();
                            break;
                        case 'NEXT':
                            showCustomer();
                            break;
                        default:
                            typeMessage('UNKNOWN COMMAND. Type HELP for available commands.');
                            playBuzzerSound();
                    }
                }, 200);
            });
        }
        
        function lookupAccount(accountNumber) {
            typeMessage('Accessing bank database...');
            
            setTimeout(() => {
                const record = bankDatabase[accountNumber];
                if (record) {
                    typeMessage('=== CUSTOMER RECORD ===');
                    setTimeout(() => typeMessage(`NAME: ${record.name}`), 300);
                    setTimeout(() => typeMessage(`DOB: ${record.dob}`), 600);
                    setTimeout(() => typeMessage(`ADDRESS: ${record.address}`), 900);
                    setTimeout(() => typeMessage(`PHOTO: ${record.photo}`), 1200);
                    setTimeout(() => typeMessage(`SIGNATURE ON FILE: ${record.signature}`), 1500);
                    setTimeout(() => typeMessage(`BALANCE: $${record.balance}`), 1800);
                    setTimeout(() => typeMessage(`STATUS: ${record.accountStatus}`), 2100);
                    setTimeout(() => typeMessage('=== END RECORD ==='), 2400);
                } else {
                    typeMessage('ACCOUNT NOT FOUND');
                    playBuzzerSound();
                }
            }, 800);
        }
        
        function examineDocument(docType) {
            if (!gameState.currentCustomer) {
                typeMessage('No customer present');
                return;
            }
            
            let doc;
            if (docType === 'SELECTED' && gameState.selectedDocument !== null) {
                doc = gameState.currentCustomer.documents[gameState.selectedDocument];
            } else {
                doc = gameState.currentCustomer.documents.find(d => 
                    d.type === docType || d.title.includes(docType)
                );
            }
            
            if (!doc) {
                typeMessage('Document not found');
                playBuzzerSound();
                return;
            }
            
            createTypewriterSound(400, 0.3);
            typeMessage(`=== EXAMINING: ${doc.title} ===`);
            
            let delay = 400;
            Object.entries(doc.data).forEach(([key, value]) => {
                setTimeout(() => {
                    const label = key.replace(/([A-Z])/g, ' $1').toUpperCase();
                    typeMessage(`${label}: ${value}`);
                }, delay);
                delay += 300;
            });
            
            setTimeout(() => typeMessage('=== END DOCUMENT ==='), delay);
        }
        
        function verifyAmount(amount) {
            typeMessage(`VERIFYING AMOUNT: $${amount}`);
            createTypewriterSound(600, 0.5);
            
            setTimeout(() => {
                typeMessage('Amount verification complete');
                playStampSound();
            }, 1000);
        }
        
        function approveTransaction() {
            if (!gameState.currentCustomer) {
                typeMessage('No customer present');
                return;
            }
            
            playStampSound();
            typeMessage('TRANSACTION APPROVED');
            typeMessage('Processing...');
            
            setTimeout(() => {
                const customer = gameState.currentCustomer;
                const isCorrect = !customer.isFraud;
                
                gameState.transactions++;
                gameState.totalDecisions++;
                
                if (isCorrect) {
                    gameState.score += 100;
                    gameState.correctDecisions++;
                    typeMessage('✓ CORRECT DECISION - Valid transaction approved');
                } else {
                    gameState.score -= 50;
                    typeMessage('✗ INCORRECT DECISION - Fraudulent transaction approved!');
                    playBuzzerSound();
                }
                
                updateStatus();
                setTimeout(() => {
                    typeMessage('Customer leaves. Type NEXT for next customer.');
                }, 2000);
            }, 2000);
        }
        
        function rejectTransaction() {
            if (!gameState.currentCustomer) {
                typeMessage('No customer present');
                return;
            }
            
            playBuzzerSound();
            typeMessage('TRANSACTION REJECTED');
            typeMessage('Notifying security...');
            
            setTimeout(() => {
                const customer = gameState.currentCustomer;
                const isCorrect = customer.isFraud;
                
                gameState.transactions++;
                gameState.totalDecisions++;
                
                if (isCorrect) {
                    gameState.score += 100;
                    gameState.correctDecisions++;
                    typeMessage('✓ CORRECT DECISION - Fraudulent transaction rejected');
                } else {
                    gameState.score -= 50;
                    typeMessage('✗ INCORRECT DECISION - Valid transaction rejected!');
                }
                
                updateStatus();
                setTimeout(() => {
                    typeMessage('Customer leaves. Type NEXT for next customer.');
                }, 2000);
            }, 2000);
        }
        
        function showHelp() {
            typeMessage('=== BANK TELLER COMMANDS ===');
            setTimeout(() => typeMessage('LOOKUP [account] - Look up customer in database'), 200);
            setTimeout(() => typeMessage('EXAMINE [document] - Examine document details'), 400);
            setTimeout(() => typeMessage('VERIFY [amount] - Verify transaction amount'), 600);
            setTimeout(() => typeMessage('APPROVE - Approve the transaction'), 800);
            setTimeout(() => typeMessage('REJECT - Reject the transaction'), 1000);
            setTimeout(() => typeMessage('NEXT - Load next customer'), 1200);
            setTimeout(() => typeMessage('HELP - Show this help'), 1400);
        }
        
        function updateStatus() {
            const accuracy = gameState.totalDecisions > 0 ? 
                Math.round((gameState.correctDecisions / gameState.totalDecisions) * 100) : 100;
            
            document.getElementById('status').textContent = 
                `Score: ${gameState.score} | Transactions: ${gameState.transactions} | Accuracy: ${accuracy}% | Time: ${new Date().toLocaleTimeString()}`;
        }
        
        // Initialize game
        document.getElementById('command-input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const command = this.value;
                if (command.trim()) {
                    processCommand(command);
                    this.value = '';
                }
            }
        });
        
        // Auto-focus input
        document.getElementById('command-input').focus();
        
        // Start with first customer
        setTimeout(() => {
            showCustomer();
        }, 2000);
        
        // Update status every second
        setInterval(updateStatus, 1000);
    </script>
</body>
</html>